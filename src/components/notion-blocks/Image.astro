---
import * as interfaces from '../../lib/notion/interfaces'
import { fetchImageAsDataURI } from '../../lib/blog-helpers.ts'
import Caption from './Caption.astro'

export interface Props {
  block: interfaces.Block
}

const { block } = Astro.props

let image = ''
if (block.Image.External) {
  image = block.Image.External.Url
} else if (block.Image.File) {
  image = await fetchImageAsDataURI(block.Image.File.Url)
}
---

<figure class="image">
  <div>
    {image && (
      <img
        src={image}
        alt="image block"
        />
      )}
  </div>
  <Caption richTexts={block.Image.Caption} />
</figure>

<style>
  .image {
    margin: 0 auto;
  }
  .image > div:first-child {
    text-align: center;
  }
</style>
